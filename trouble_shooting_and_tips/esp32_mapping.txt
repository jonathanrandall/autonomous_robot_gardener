When you plug in multiple ESP32s, they both show up as /dev/ttyUSB0, /dev/ttyUSB1, etc., depending on detection order. To make them always appear as /dev/esp32up and /dev/esp32down, you create udev rules that match each board’s unique USB attributes (like serial number or vendor/product ID).

Here’s the process again:

1. Identify your ESP32s

Plug one ESP32 in and run:

# To create persistent names for ESP32 devices:
# 1. Find unique identifiers (vendor ID, product ID, serial number) with udevadm
# 2. Create a udev rule mapping them to custom names (e.g. /dev/esp32up, /dev/esp32down)

# One-liner to list all connected serial devices with IDs:
for dev in /dev/ttyUSB* /dev/ttyACM*; do
    [[ -e "$dev" ]] || continue
    echo "Device: $dev"
    udevadm info -a -n "$dev" | egrep 'idVendor|idProduct|serial' | head -n 3
    echo
done

# Example output:
# Device: /dev/ttyUSB0
#     ATTRS{idVendor}=="10c4"
#     ATTRS{idProduct}=="ea60"
#     ATTRS{serial}=="0001"
#
# Device: /dev/ttyUSB1
#     ATTRS{idVendor}=="10c4"
#     ATTRS{idProduct}=="ea60"
#     ATTRS{serial}=="0002"

# Once you know which is which, create a udev rule:
# (replace serial values with the ones from your devices)

# /etc/udev/rules.d/99-esp32.rules
SUBSYSTEM=="tty", ATTRS{idVendor}=="10c4", ATTRS{idProduct}=="ea60", ATTRS{serial}=="0001", SYMLINK+="esp32up"
SUBSYSTEM=="tty", ATTRS{idVendor}=="10c4", ATTRS{idProduct}=="ea60", ATTRS{serial}=="0002", SYMLINK+="esp32down"

# After saving the file, reload udev rules:
sudo udevadm control --reload-rules
sudo udevadm trigger

# Now you’ll always have /dev/esp32up and /dev/esp32down

